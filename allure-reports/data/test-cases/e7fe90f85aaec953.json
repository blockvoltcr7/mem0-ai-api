{"uid":"e7fe90f85aaec953","name":"test_error_handling","fullName":"tests.integration_mem0.test_peptide_coaching_scenario.TestPeptideCoachingScenario#test_error_handling","historyId":"c883e7ca20577dd2260d5eed20b409eb","time":{"start":1748367013357,"stop":1748367024261,"duration":10904},"description":"Test error handling in various scenarios.","descriptionHtml":"<p>Test error handling in various scenarios.</p>\n","status":"passed","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"peptide_coach","time":{"start":1748366932713,"stop":1748366933032,"duration":319},"status":"passed","steps":[{"name":"Initializing Peptide Coaching Assistant","time":{"start":1748366932713,"stop":1748366933032,"duration":319},"status":"passed","steps":[],"attachments":[{"uid":"8b36bcd32603033f","name":"Mem0 Configuration","source":"8b36bcd32603033f.txt","type":"text/plain","size":327}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"test_user_id","time":{"start":1748367013357,"stop":1748367013357,"duration":0},"status":"passed","steps":[],"attachments":[{"uid":"c03ecb07317d7c5","name":"Test User ID","source":"c03ecb07317d7c5.txt","type":"text/plain","size":26}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":1,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"Test error handling in various scenarios.","status":"passed","steps":[{"name":"Testing with empty message","time":{"start":1748367013358,"stop":1748367014584,"duration":1226},"status":"passed","steps":[{"name":"Generating AI response for message: '...'","time":{"start":1748367013358,"stop":1748367014571,"duration":1213},"status":"broken","statusMessage":"openai.BadRequestError: Error code: 400 - {'error': {'message': \"'$.input' is invalid. Please check the API reference: https://platform.openai.com/docs/api-reference.\", 'type': 'invalid_request_error', 'param': None, 'code': None}}\n","statusTrace":"  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/tests/integration_mem0/test_peptide_coaching_scenario.py\", line 140, in generate_ai_response\n    relevant_memories = memory.search(\n                        ^^^^^^^^^^^^^^\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/mem0/memory/main.py\", line 649, in search\n    original_memories = future_memories.result()\n                        ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py\", line 449, in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n  File \"/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/_base.py\", line 401, in __get_result\n    raise self._exception\n  File \"/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/concurrent/futures/thread.py\", line 58, in run\n    result = self.fn(*self.args, **self.kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/mem0/memory/main.py\", line 668, in _search_vector_store\n    embeddings = self.embedding_model.embed(query, \"search\")\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/mem0/embeddings/openai.py\", line 46, in embed\n    self.client.embeddings.create(input=[text], model=self.config.model, dimensions=self.config.embedding_dims)\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/openai/resources/embeddings.py\", line 129, in create\n    return self._post(\n           ^^^^^^^^^^^\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1239, in post\n    return cast(ResponseT, self.request(cast_to, opts, stream=stream, stream_cls=stream_cls))\n                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/Users/samisabir-idrissi/code/ssiautomationsapps/mem01-ai-tutor/.venv/lib/python3.12/site-packages/openai/_base_client.py\", line 1034, in request\n    raise self._make_status_error_from_response(err.response) from None\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"8a767a6b15fc1031","name":"Empty Message Error","source":"8a767a6b15fc1031.txt","type":"text/plain","size":207}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},{"name":"Testing with very long message","time":{"start":1748367014584,"stop":1748367024261,"duration":9677},"status":"passed","steps":[{"name":"Generating AI response for message: 'BPC-157 BPC-157 BPC-157 BPC-157 BPC-157 BPC-157 BP...'","time":{"start":1748367014584,"stop":1748367024261,"duration":9677},"status":"passed","steps":[],"attachments":[{"uid":"65261dc8c145c7d0","name":"Retrieved Memories","source":"65261dc8c145c7d0.txt","type":"text/plain","size":27},{"uid":"b666f128bb153aea","name":"AI Response","source":"b666f128bb153aea.txt","type":"text/plain","size":2224}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":1,"attachmentsCount":2,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"e6604b99b813759a","name":"log","source":"e6604b99b813759a.txt","type":"text/plain","size":960}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":4,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"severity","value":"minor"},{"name":"story","value":"Error Handling"},{"name":"epic","value":"Mem0 Real-World Applications"},{"name":"feature","value":"Peptide Health Coaching"},{"name":"tag","value":"api"},{"name":"parentSuite","value":"tests.integration_mem0"},{"name":"suite","value":"test_peptide_coaching_scenario"},{"name":"subSuite","value":"TestPeptideCoachingScenario"},{"name":"host","value":"samis-MacBook-Pro.local"},{"name":"thread","value":"33777-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.integration_mem0.test_peptide_coaching_scenario"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"minor","retries":[{"uid":"905e7a99c8805b8b","status":"failed","statusDetails":"Failed: Failed to initialize peptide coach: timed out","time":{"start":1748365401283,"stop":1748365401283,"duration":0}}],"categories":[],"tags":["api"]},"source":"e7fe90f85aaec953.json","parameterValues":[]}